<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Wesib: Web Components Building Blocks</title><meta name="description" content="Documentation for Wesib: Web Components Building Blocks"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Wesib: Web Components Building Blocks</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>Wesib: Web Components Building Blocks</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#wesib-web-components-building-blocks" id="wesib-web-components-building-blocks" style="color: inherit; text-decoration: none;">
  <h1>Wesib: Web Components Building Blocks</h1>
</a>
<p><a href="https://www.npmjs.com/package/@wesib/wesib"><img src="https://img.shields.io/npm/v/@wesib/wesib.svg?logo=npm" alt="NPM"></a>
<a href="https://github.com/wesib/wesib/actions?query=workflow:Build"><img src="https://github.com/wesib/wesib/workflows/Build/badge.svg" alt="Build Status"></a>
<a href="https://www.codacy.com/gh/wesib/wesib/dashboard?utm_source=github.com&utm_medium=referral&utm_content=wesib/wesib&utm_campaign=Badge_Grade"><img src="https://app.codacy.com/project/badge/Grade/0c3bc9bce2024d7ba37566073d3f29f6" alt="Code Quality"></a>
<a href="https://www.codacy.com/gh/wesib/wesib/dashboard?utm_source=github.com&utm_medium=referral&utm_content=wesib/wesib&utm_campaign=Badge_Coverage"><img src="https://app.codacy.com/project/badge/Coverage/0c3bc9bce2024d7ba37566073d3f29f6" alt="Coverage"></a>
<a href="https://github.com/wesib/wesib"><img src="https://img.shields.io/static/v1?logo=github&label=GitHub&message=project&color=informational" alt="GitHub Project"></a>
<a href="https://wesib.github.io/wesib/"><img src="https://img.shields.io/static/v1?logo=typescript&label=API&message=docs&color=informational" alt="API Documentation"></a></p>
<p><a href="https://github.com/wesib/wesib">Wesib</a> is a base for web components definition.</p>
<p>It provides a way to define custom elements. But instead of extending <code>HTMLElement</code>, it supports arbitrary component
classes, and defines custom elements for them programmatically.</p>
<p>Wesib provides an IoC container, a component definition and lifecycle callbacks, and an infrastructure for opt-in
features that can involve in component definition process and thus alter the resulting components in very flexible way.</p>
<p>This package provides a core API.</p>
<p>The <a href="https://github.com/wesib/generic">@wesib/generic</a> package provides generic web components and features.</p>
<p>The examples can be found in <a href="https://github.com/wesib/examples">@wesib/examples</a>.</p>

<a href="#components" id="components" style="color: inherit; text-decoration: none;">
  <h2>Components</h2>
</a>
<p>Wesib allows defining custom element by decorating a component class with <code>@Component</code> decorator:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Component</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-4">Component</span><span class="hl-1">(</span><span class="hl-3">&#39;my-component&#39;</span><span class="hl-1">) </span><span class="hl-5">// Custom element name</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">MyComponent</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// ...component definition</span><br/><span class="hl-1">}</span>
</code></pre>
<p>No need to extend <code>HTMLElement</code> or any other class. Instead, Wesib creates a custom element accordingly to its
definition built either programmatically or using component decorators.</p>
<p>To register custom component(s) call <code>bootstrapComponents()</code> function like this:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">bootstrapComponents</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">bootstrapComponents</span><span class="hl-1">(</span><span class="hl-2">MyComponent</span><span class="hl-1">);</span>
</code></pre>
<p>After that the custom element can be used anywhere in the document:</p>
<pre><code class="language-html"><span class="hl-8">&lt;</span><span class="hl-9">my-component</span><span class="hl-8">&gt;&lt;/</span><span class="hl-9">my-component</span><span class="hl-8">&gt;</span>
</code></pre>
<p>The component instance created along with a custom element and bound to it. All the logic of custom element delegated
to the bound component instance.</p>

<a href="#element-attributes" id="element-attributes" style="color: inherit; text-decoration: none;">
  <h2>Element Attributes</h2>
</a>
<p>To define custom element attributes use <code>@Attribute</code> or <code>@AttributeChanged</code> component property decorators,
or <code>@Attributes</code> component class decorator.</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Attribute</span><span class="hl-1">, </span><span class="hl-2">AttributeChanged</span><span class="hl-1">, </span><span class="hl-2">Attributes</span><span class="hl-1">, </span><span class="hl-2">Component</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-4">Component</span><span class="hl-1">(</span><span class="hl-3">&#39;my-component&#39;</span><span class="hl-1">) </span><span class="hl-5">// Custom element name</span><br/><span class="hl-1">@</span><span class="hl-4">Attributes</span><span class="hl-1">(</span><span class="hl-3">&#39;attribute-one&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;another-attribute&#39;</span><span class="hl-1">)</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">MyComponent</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-4">Attribute</span><span class="hl-1">(</span><span class="hl-3">&#39;attribute-two&#39;</span><span class="hl-1">) </span><span class="hl-5">// Attribute name. When omitted the property name is used</span><br/><span class="hl-1">  </span><span class="hl-2">attribute2</span><span class="hl-1">!: </span><span class="hl-7">string</span><span class="hl-1"> | </span><span class="hl-7">null</span><span class="hl-1">; </span><span class="hl-5">// Attribute value is accessed instead.</span><br/><br/><span class="hl-1">  @</span><span class="hl-4">AttributeChanged</span><span class="hl-1">(</span><span class="hl-3">&#39;attribute-three&#39;</span><span class="hl-1">) </span><span class="hl-5">// Attribute name. When omitted the method name is used</span><br/><span class="hl-1">  </span><span class="hl-4">setAttribute3</span><span class="hl-1">(</span><span class="hl-2">newValue</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-2">oldValue</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> | </span><span class="hl-7">null</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">// This is called on attribute value modification with new and old values</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<pre><code class="language-html"><span class="hl-8">&lt;</span><span class="hl-9">my-component</span><br/><span class="hl-1">    </span><span class="hl-10">attribute-one</span><span class="hl-1">=</span><span class="hl-11">&quot;1&quot;</span><span class="hl-1">  </span><span class="hl-12">&lt;!--</span><span class="hl-1"> </span><span class="hl-10">Can</span><span class="hl-1"> </span><span class="hl-10">be</span><span class="hl-1"> </span><span class="hl-10">accessed</span><span class="hl-1"> </span><span class="hl-10">with</span><span class="hl-1"> </span><span class="hl-10">element</span><span class="hl-12">&#39;s</span><span class="hl-1"> </span><span class="hl-10">`element.getAttribute(</span><span class="hl-12">&quot;attribute-one&quot;)`</span><span class="hl-1"> </span><span class="hl-10">--</span><span class="hl-8">&gt;</span><br/><span class="hl-1">    attribute-two=&quot;2&quot;  </span><span class="hl-5">&lt;!-- Can be accessed as `attribute2` property of `MyComponent` --&gt;</span><br/><span class="hl-1">    attribute-three&quot;3&quot; </span><span class="hl-5">&lt;!-- Triggers `setAttribute3()` method call --&gt;</span><br/><span class="hl-1">&gt;</span><span class="hl-8">&lt;/</span><span class="hl-9">my-component</span><span class="hl-8">&gt;</span>
</code></pre>

<a href="#element-properties" id="element-properties" style="color: inherit; text-decoration: none;">
  <h2>Element Properties</h2>
</a>
<p>To define the properties of custom element use a <code>@DomProperty</code> component property decorator.</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Component</span><span class="hl-1">, </span><span class="hl-2">DomProperty</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-4">Component</span><span class="hl-1">(</span><span class="hl-3">&#39;my-component&#39;</span><span class="hl-1">) </span><span class="hl-5">// Custom element name</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">MyComponent</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-4">DomProperty</span><span class="hl-1">(</span><span class="hl-3">&#39;elementProperty&#39;</span><span class="hl-1">) </span><span class="hl-5">// Element property name. The decorated property name is used if omitted.</span><br/><span class="hl-1">  </span><span class="hl-2">customProperty</span><span class="hl-1"> = </span><span class="hl-13">12</span><span class="hl-1">; </span><span class="hl-5">// Element&#39;s `elementProperty` is backed by this one.</span><br/><span class="hl-1">}</span>
</code></pre>
<p>The same can be done for element methods with <code>@DomMethod</code> decorator, which is just a convenient alias for
<code>@DomProperty</code>.</p>

<a href="#ioc-container" id="ioc-container" style="color: inherit; text-decoration: none;">
  <h2>IoC Container</h2>
</a>
<p>Wesib provides contexts for each component and feature (see below). This context can be used to access provided values.</p>
<p>For example, each component class constructor accepts a <code>ComponentContext</code> instance as its only argument.</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Component</span><span class="hl-1">, </span><span class="hl-2">ComponentContext</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-4">Component</span><span class="hl-1">(</span><span class="hl-3">&#39;my-component&#39;</span><span class="hl-1">) </span><span class="hl-5">// Custom element name</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">MyComponent</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-6">readonly</span><span class="hl-1"> </span><span class="hl-2">_service</span><span class="hl-1">: </span><span class="hl-7">MyService</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-2">context</span><span class="hl-1">: </span><span class="hl-7">ComponentContext</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_service</span><span class="hl-1"> = </span><span class="hl-2">context</span><span class="hl-1">.</span><span class="hl-4">get</span><span class="hl-1">(</span><span class="hl-2">MyService</span><span class="hl-1">); </span><span class="hl-5">// Obtain a `MyService` instance provided by some feature elsewhere.</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>IoC container implementation is based on <a href="https://npmjs.com/package/@proc7ts/context-values">@proc7ts/context-values</a>.</p>

<a href="#features" id="features" style="color: inherit; text-decoration: none;">
  <h2>Features</h2>
</a>
<p>Apart from custom elements definition and IoC container, everything in Wesib is an opt-in feature.</p>
<p>It is possible to define custom features to extend Wesib. E.g. to define or augment existing components, extend custom
elements (like <code>@Attribute</code> or <code>@DomProperty</code> decorators do), or provide some context values.</p>
<p>The feature is a class decorated with <code>@Feature</code> decorator:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">cxBuildAsset</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@proc7ts/context-builder&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">ComponentContext</span><span class="hl-1">, </span><span class="hl-2">DefinitionContext</span><span class="hl-1">, </span><span class="hl-2">Feature</span><span class="hl-1">, </span><span class="hl-2">FeatureContext</span><span class="hl-1">, </span><span class="hl-2">FeatureSetup</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-4">Feature</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">needs:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-2">OtherFeature1</span><span class="hl-1">, </span><span class="hl-5">// Requires other features to be enabled.</span><br/><span class="hl-1">    </span><span class="hl-2">MyComponent</span><span class="hl-1">, </span><span class="hl-5">// The required component will be defined too.</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-4">setup</span><span class="hl-1">(</span><span class="hl-2">setup</span><span class="hl-1">: </span><span class="hl-7">FeatureSetup</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">setup</span><span class="hl-1">.</span><span class="hl-4">provide</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-4">cxBuildAsset</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">GlobalService</span><span class="hl-1">, </span><span class="hl-5">// Provide a `GlobalService` available globally</span><br/><span class="hl-1">        () </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-4">GlobalService</span><span class="hl-1">(), </span><span class="hl-5">// in all IoC contexts</span><br/><span class="hl-1">      ),</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">    </span><span class="hl-2">setup</span><span class="hl-1">.</span><span class="hl-4">perDefinition</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-4">cxBuildAsset</span><span class="hl-1">(</span><span class="hl-2">DefinitionService</span><span class="hl-1">, ({ </span><span class="hl-2">context</span><span class="hl-1">: </span><span class="hl-2">definitionContext</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// Provide a `DefinitionService` available during component definition.</span><br/><span class="hl-1">        </span><span class="hl-5">// Such service will be provided per component class</span><br/><span class="hl-1">        </span><span class="hl-5">// and will be available during custom element construction,</span><br/><span class="hl-1">        </span><span class="hl-5">// e.g. to `onDefinition()` listeners.</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-4">DefinitionService</span><span class="hl-1">(</span><span class="hl-2">definitionContext</span><span class="hl-1">);</span><br/><span class="hl-1">      }),</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">    </span><span class="hl-2">setup</span><span class="hl-1">.</span><span class="hl-4">perComponent</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-4">cxBuildAsset</span><span class="hl-1">(</span><span class="hl-2">MyService</span><span class="hl-1">, ({ </span><span class="hl-2">context</span><span class="hl-1">: </span><span class="hl-2">componentContext</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// Provide a `MyService` available to components.</span><br/><span class="hl-1">        </span><span class="hl-5">// Such service will be provided per component instance</span><br/><span class="hl-1">        </span><span class="hl-5">// and will be available to component instance and `onComponent()` listeners.</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-4">MyService</span><span class="hl-1">(</span><span class="hl-2">componentContext</span><span class="hl-1">.</span><span class="hl-2">component</span><span class="hl-1">);</span><br/><span class="hl-1">      }),</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">init</span><span class="hl-1">(</span><span class="hl-2">context</span><span class="hl-1">: </span><span class="hl-7">FeatureContext</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">// Bootstrap the feature by calling methods of provided context.</span><br/><br/><span class="hl-1">    </span><span class="hl-2">context</span><span class="hl-1">.</span><span class="hl-4">onDefinition</span><span class="hl-1">((</span><span class="hl-2">definitionContext</span><span class="hl-1">: </span><span class="hl-7">DefinitionContext</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">// Notified on each component definition.</span><br/><br/><span class="hl-1">      </span><span class="hl-5">// The service provided with `perDefinition()` method above is available here</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-14">definitionService</span><span class="hl-1"> = </span><span class="hl-2">definitionContext</span><span class="hl-1">.</span><span class="hl-4">get</span><span class="hl-1">(</span><span class="hl-2">DefinitionService</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">definitionContext</span><span class="hl-1">.</span><span class="hl-4">whenReady</span><span class="hl-1">(() </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// This is called when element class is defined.</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-3">`Define element class </span><span class="hl-6">${</span><span class="hl-2">definitionContext</span><span class="hl-15">.</span><span class="hl-2">elementType</span><span class="hl-15">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1"> +</span><br/><span class="hl-1">            </span><span class="hl-3">` for component of </span><span class="hl-6">${</span><span class="hl-2">definitionContext</span><span class="hl-15">.</span><span class="hl-2">componentType</span><span class="hl-15">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3"> type`</span><span class="hl-1">,</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-2">context</span><span class="hl-1">.</span><span class="hl-4">onComponent</span><span class="hl-1">((</span><span class="hl-2">componentContext</span><span class="hl-1">: </span><span class="hl-7">ComponentContext</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">// Notified on each component instantiation.</span><br/><br/><span class="hl-1">      </span><span class="hl-5">// The service provided with `perComponent()` method above is available here</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-14">myService</span><span class="hl-1"> = </span><span class="hl-2">componentContext</span><span class="hl-1">.</span><span class="hl-4">get</span><span class="hl-1">(</span><span class="hl-2">MyService</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">componentContext</span><span class="hl-1">.</span><span class="hl-4">whenReady</span><span class="hl-1">(() </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// This is called when component is instantiated,</span><br/><span class="hl-1">        </span><span class="hl-5">// which happens right after custom element instantiation.</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">componentContext</span><span class="hl-1">.</span><span class="hl-2">element</span><span class="hl-1">, </span><span class="hl-3">` is instantiated for`</span><span class="hl-1">, </span><span class="hl-2">componentContext</span><span class="hl-1">.</span><span class="hl-2">component</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">})</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">MyFeature</span><span class="hl-1"> {}</span>
</code></pre>
<p>To enable a custom feature just pass it to <code>bootstrapComponents()</code> like this:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">bootstrapComponents</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">bootstrapComponents</span><span class="hl-1">(</span><span class="hl-2">MyFeature</span><span class="hl-1">);</span>
</code></pre>
<p>Note that components are kind of features that, when passed to this function (or enabled with <code>needs</code> option),
register themselves as components.</p>

<a href="#component-state" id="component-state" style="color: inherit; text-decoration: none;">
  <h2>Component State</h2>
</a>
<p>Whenever a component state changes, e.g. when element attribute or property value changes, a state update notification
issued.</p>
<p>A state update notification can also be issued by calling a <code>ComponentContext.updateState()</code> method:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Component</span><span class="hl-1">, </span><span class="hl-2">ComponentContext</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-4">Component</span><span class="hl-1">(</span><span class="hl-3">&#39;my-component&#39;</span><span class="hl-1">) </span><span class="hl-5">// Custom element name</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">MyComponent</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">data</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-6">readonly</span><span class="hl-1"> </span><span class="hl-2">_context</span><span class="hl-1">: </span><span class="hl-7">ComponentContext</span><span class="hl-1">) {}</span><br/><br/><span class="hl-1">  </span><span class="hl-6">async</span><span class="hl-1"> </span><span class="hl-4">loadData</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-14">newData</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-4">fetch</span><span class="hl-1">(</span><span class="hl-3">&#39;/api/data&#39;</span><span class="hl-1">).</span><span class="hl-4">then</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-4">json</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-14">oldData</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-2">newData</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_context</span><span class="hl-1">.</span><span class="hl-4">updateState</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, </span><span class="hl-2">newData</span><span class="hl-1">, </span><span class="hl-2">oldData</span><span class="hl-1">); </span><span class="hl-5">// Update the state</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>A <code>ComponentState</code> instance available in component context allows to track the component state updates.</p>

<a href="#shadow-dom" id="shadow-dom" style="color: inherit; text-decoration: none;">
  <h2>Shadow DOM</h2>
</a>
<p>It is possible to attach shadow root to custom element by decorating the component with <code>@AttachShadow</code> decorator.</p>
<p>If shadow DOM is supported, then a shadow root will be attached to element. Otherwise, an element itself will be used
as shadow root. In both cases the shadow root will be available in component context under <code>[ShadowContentRoot]</code> key.</p>
<p>A <code>ComponentContext.contentRoot</code> property is always available. It either contains a shadow root, or element itself.
This is a root DOM node component element contents.</p>

<a href="#rendering" id="rendering" style="color: inherit; text-decoration: none;">
  <h2>Rendering</h2>
</a>
<p>Wesib core does not provide any mechanics for component rendering. It is completely up to the developer which rendering
mechanics to use: direct DOM manipulations, template processing, virtual DOM, etc.</p>
<p>However, Wesib is able to notify the renderer on component state updates and trigger its rendering. For that a <code>@Render</code>
decorator can be applied to component renderer method:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Attribute</span><span class="hl-1">, </span><span class="hl-2">Component</span><span class="hl-1">, </span><span class="hl-2">ComponentContext</span><span class="hl-1">, </span><span class="hl-2">Render</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@wesib/wesib&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-4">Component</span><span class="hl-1">(</span><span class="hl-3">&#39;greet-text&#39;</span><span class="hl-1">)</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-7">GreetTextComponent</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-4">Attribute</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> | </span><span class="hl-7">null</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-6">readonly</span><span class="hl-1"> </span><span class="hl-2">_context</span><span class="hl-1">: </span><span class="hl-7">ComponentContext</span><span class="hl-1">) {}</span><br/><br/><span class="hl-1">  @</span><span class="hl-4">Render</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-4">render</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_context</span><span class="hl-1">.</span><span class="hl-2">contentRoot</span><span class="hl-1">.</span><span class="hl-2">innerText</span><span class="hl-1"> = </span><span class="hl-3">`Hello, </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-15">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">!`</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>The <code>@Render</code>-decorated method will be called from <code>requestAnimationFrame()</code> callback by default. So, it won&#39;t be
called too frequently.</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">Wesib: <wbr/>Web <wbr/>Components <wbr/>Building <wbr/>Blocks</a>
<ul>
<li class="tsd-kind-module"><a href="modules/_wesib_wesib.html">@wesib/wesib</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.AttributeDef.html">Attribute<wbr/>Def</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.AttributePath.html">Attribute<wbr/>Path</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.Attributes.html">Attributes</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.ComponentSlot.html">Component<wbr/>Slot</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.DomPropertyPath.html">Dom<wbr/>Property<wbr/>Path</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.ElementDef.html">Element<wbr/>Def</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.RenderDef.html">Render<wbr/>Def</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.StatePropertyPath.html">State<wbr/>Property<wbr/>Path</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="modules/_wesib_wesib.StateUpdater.html">State<wbr/>Updater</a></li></ul></li>
<li class="tsd-kind-module"><a href="modules/_wesib_wesib_testing.html">@wesib/wesib/testing</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>